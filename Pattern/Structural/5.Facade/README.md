# 5. Фасад (Facade)
Суть: Динамически добавляет объекту новые обязанности.

Шаблон «Фасад» — это шаблон проектирования в области разработки программного обеспечения, который относится к категории структурных шаблонов. Он предоставляет упрощённый и унифицированный интерфейс для набора интерфейсов или подсистем в рамках более крупной системы, что упрощает её использование и снижает сложность системы для клиентов. По сути, он выступает в роли фасада или точки входа в более сложную систему, защищая клиентов от её тонкостей.

## Задача
>_Представьте, что у вас есть сложная программная система, состоящая из множества компонентов, каждый из которых имеет собственный набор методов и способов взаимодействия. Без шаблона проектирования «Фасад» клиентам пришлось бы взаимодействовать с этими компонентами напрямую, что могло бы привести к путанице в зависимостях и усложнить понимание и поддержку системы._

## Ключевые компоненты паттерна Фасад
1. __Клиент__
Представляет класс или компонент, использующий шаблон проектирования «Фасад».
2. __Класс-фасад__ 
Это класс, реализующий шаблон проектирования «Фасад». Он предоставляет клиенту упрощённый интерфейс и делегирует вызовы базовым подсистемам.
3. __Подсистема 1 и Подсистема 2__
Это компоненты или классы, выполняющие определённые операции. Клиент взаимодействует с этими подсистемами через фасад.

## Диаграмма паттерна Фасад
<figure>
    <img src ="/assets/images/Diagram_Facade.png" alt = "Facade">
</figure>

## Пример
```c++
class CPU {
public:
    void start() { std::cout << "CPU started" << std::endl; }
};

class Memory {
public:
    void load() { std::cout << "Memory loaded" << std::endl; }
};

class HardDrive {
public:
    void read() { std::cout << "HardDrive read" << std::endl; }
};

class ComputerFacade {
private:
    CPU cpu;
    Memory memory;
    HardDrive hdd;
public:
    void start() {
        cpu.start();
        memory.load();
        hdd.read();
        std::cout << "Computer started!" << std::endl;
    }
};

int main() {
    ComputerFacade computer;
    computer.start();  // Включает все компоненты автоматически
    return 0;
}
```
## Преимущества шаблона проектирования Фасад
✅ __Упрощённый интерфейс:__ клиентам нужно знать только о методах фасада, им не нужно разбираться в сложностях базовых подсистем.

✅ __Снижение сложности:__ Шаблон скрывает сложности, связанные с подсистемами, что упрощает понимание системы и управление ею.

✅ __Слабая связанность:__ Клиенты не зависят от подсистем, что позволяет создавать более гибкое и модульное программное обеспечение.

✅ __Простое обслуживание:__ Изменения в подсистемах можно изолировать внутри фасада, что минимизирует влияние на клиентский код.

✅ __Улучшенное тестирование:__ Тестирование становится проще, поскольку клиенты взаимодействуют с единым интерфейсом, а не с несколькими подсистемами.

✅ __Упрощённый интерфейс:__ Шаблон проектирования «Фасад» предоставляет простой и понятный интерфейс для сложной системы. Он скрывает сложные детали подсистем и предоставляет единый набор методов, упрощая взаимодействие клиентов с системой.

✅ __Абстракция сложности:__ абстрагируется от сложности базовых подсистем. Клиентам не нужно знать, как взаимодействуют различные компоненты или классы; они могут достигать своих целей, вызывая методы объекта-фасада.

✅ __Уменьшение связанности:__ благодаря использованию фасада зависимости между клиентским кодом и подсистемами сводятся к минимуму. Такая слабая связанность повышает удобство сопровождения и позволяет вносить изменения в подсистемы, не затрагивая клиентский код.

✅ __Улучшенная читаемость кода:__ Шаблон проектирования «Фасад» улучшает читаемость кода, предоставляя понятный и лаконичный API. Он упрощает клиентский код, делая его более понятным и менее подверженным ошибкам.

✅ __Способствует модульному проектированию:__ способствует применению модульного подхода к проектированию программного обеспечения. Каждую подсистему можно разрабатывать, тестировать и обслуживать независимо от других. Такая модульность упрощает разработку и обслуживание.

✅ __Упрощённое тестирование:__ Тестирование становится проще, поскольку клиенты могут тестироваться с помощью фасада, который абстрагирует сложные подсистемы. Такая изоляция упрощает модульное тестирование и снижает потребность в сложных имитациях.

✅ __Инкапсуляция изменений:__ если в подсистемах требуются изменения (например, обновление библиотеки или рефакторинг внутреннего кода), фасад выступает в роли буфера. Вы можете вносить изменения в подсистемы, сохраняя стабильность интерфейса фасада и сводя к минимуму влияние на клиентов.

✅ __Улучшенная возможность повторного использования:__ Фасады можно повторно использовать в разных частях кодовой базы или в разных проектах, что обеспечивает согласованный и стандартизированный способ взаимодействия с базовой системой.

✅ __Улучшенная отладка:__ отладка становится более удобной, поскольку проблемы, связанные с подсистемами, можно локализовать на уровне фасада. Такая изоляция упрощает процесс отладки и снижает сложность поиска и исправления ошибок.

✅ __Способствует внедрению лучших практик:__ поощряет использование таких принципов проектирования, как разделение задач и принцип единой ответственности. Каждая подсистема сосредоточена на выполнении конкретной задачи, что позволяет сделать кодовую базу более организованной и удобной для сопровождения.

## Недостатки шаблона проектирования Фасад
❌ __Ограниченная гибкость:__ шаблон «Фасад» может чрезмерно упростить интерфейс для подсистем, что может ограничить гибкость опытных пользователей, которым нужен детальный контроль над подсистемами. Опытные пользователи могут счесть интерфейс фасада слишком ограниченным.

❌ __Повышенная сложность:__ В некоторых случаях сам фасад может стать сложным, если он должен поддерживать широкий спектр функций. Управлять таким сложным фасадом и поддерживать его в рабочем состоянии может быть непросто.

❌ __Затраты на обслуживание:__ хотя шаблон фасада может защитить клиентов от изменений в подсистемах, он также может привести к дополнительным затратам на обслуживание. Если подсистемы часто меняются или их много, то обновление фасада в соответствии с этими изменениями может отнимать много времени.

❌ __Накладные расходы на производительность:__ Использование фасада может привести к незначительным накладным расходам на производительность из-за дополнительных вызовов методов и абстракций. В приложениях, где производительность имеет решающее значение, это может стать проблемой.

❌ __Возможное нарушение принципа открытости/закрытости:__ шаблон «Фасад» может привести к нарушению принципа открытости/закрытости, если для добавления новых функций или подсистем потребуется изменить класс фасада. Это может произойти, если фасад необходимо расширить, чтобы учесть изменения в базовой системе.

❌ __Дублирование функциональности:__ если для разных клиентов или сценариев использования создается несколько фасадов, это может привести к дублированию функциональности между ними. Это может привести к избыточности кода и проблемам с обслуживанием.

❌ __Сложная инициализация:__ Если подсистемы требуют сложной инициализации или настройки, фасаду может потребоваться передать эту сложность клиенту, что сделает процесс инициализации менее простым.

❌ __Размер и сложность фасада:__ Если подсистемы очень многочисленны и сложны, то и сам фасад может стать большим и сложным. Это может затруднить понимание и поддержку фасада.

❌ __Тесная связь с подсистемами:__ В некоторых случаях фасад может быть тесно связан с подсистемами, которые он инкапсулирует. Это может произойти, если для выполнения своих задач фасаду требуется доступ к внутренним компонентам подсистем, что противоречит принципу слабой связанности.

❌ __Не всегда уместно:__ Шаблон проектирования «Фасад» подходит не для всех сценариев. Он наиболее эффективен при работе со сложными системами, где требуется упрощение интерфейса. В более простых системах добавление фасада может привести к ненужной сложности.

## Где применяется?
1. Упрощённая библиотека/API
2. Интеграция подсистем
3. Интеграция устаревшего кода
4. Доступ к базе данных
5. Управление ресурсами
и т.д.